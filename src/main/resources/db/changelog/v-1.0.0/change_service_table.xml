<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
                   xmlns:pro="http://www.liquibase.org/xml/ns/pro" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext
                   https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd
                   http://www.liquibase.org/xml/ns/pro
                   https://www.liquibase.org/xml/ns/pro/liquibase-pro-4.6.xsd
                   http://www.liquibase.org/xml/ns/dbchangelog
                   https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd">

    <changeSet author="Bisha" id="rename-service_table-to-services">
        <preConditions onFail="MARK_RAN">
            <and>
                <tableExists tableName="service_table"/>
                <not>
                    <tableExists tableName="services"/>
                </not>
            </and>
        </preConditions>
        <renameTable newTableName="services" oldTableName="service_table"/>
    </changeSet>

    <changeSet author="Bisha" id="add-status-to-services-table">
        <preConditions onFail="MARK_RAN">
            <and>
                <tableExists tableName="services"/>
                <not>
                    <columnExists tableName="services" columnName="status"/>
                </not>
            </and>
        </preConditions>
        <addColumn tableName="services">
            <column name="status" type="varchar(16)" defaultValue="NEW"/>
        </addColumn>
    </changeSet>

</databaseChangeLog>